# 1. 첫 Node.js 서버 만들기 - Hello Server!

#### 1. **Node.js란 무엇인가요?**
Node.js는 **JavaScript**를 웹 브라우저가 아닌 **서버에서 실행**할 수 있도록 해주는 **런타임 환경**입니다. 즉, JavaScript를 서버에서 사용하여 웹 서버를 만들거나 다양한 서버 측 작업을 할 수 있게 해줍니다.

여기서는 Node.js의 기본적인 **웹 서버**를 만들어볼 것입니다. 웹 서버는 클라이언트(웹 브라우저)의 요청을 받고, 응답을 반환하는 서버입니다.

---

#### 2. **프로젝트 구조**

```bash
my-node-project/
├── server.js                  # 서버 파일 (웹 서버 로직이 들어있는 파일)
├── package.json               # 프로젝트 메타데이터와 의존성 관리
└── node_modules/              # 설치된 npm 패키지들
```

---

#### 3. **`server.js` 코드**

```javascript
// http 모듈은 NodeJS에 기본 내장되어 있습니다. 이는 별도로 다운로드 없이 바로 사용하시면 됩니다.
const http = require("http");

// http 모듈에는 createServer 메서드가 있습니다.
// 1개의 인자를 사용합니다:
//    - 콜백 함수. 콜백 함수에는 2개의 인자(req, res)가 있습니다.
const server = http.createServer((req, res) => {
  // res = 요청자에게 응답하는 방법

  // http 메시지
  // 1. 시작 라인 - 확인됨
  // 2. 헤더
  // 3. 본문

  // writeHead는 2개의 인자를 사용합니다:
  // 1. 상태 코드
  // 2. MIME 유형을 위한 객체
  res.writeHead(200, { "content-type": "text/html" });

  // res.write는 클라이언트로 데이터를 보낼 때 사용됩니다.
  // 1개의 인자: 데이터
  res.write("<h1>Hello World</h1>");

  // res.end 메서드를 호출하여 응답을 완료합니다.
  res.end();
});

// createServer는 listen 메서드가 있는 객체를 반환합니다.
// listen은 2개의 인자를 사용합니다:
// 1. 포트 번호
// 2. 수신이 시작될 경우 호출되는 콜백함수
server.listen(3000, () => {
  console.log("Listening on port 3000");
});
```

---

#### 4. **세부 설명**

이제 코드를 하나하나 자세히 살펴보겠습니다.

1. **`const http = require("http");`**
   - **`require`**는 Node.js에서 모듈을 가져오는 방법입니다. 이 코드에서는 **`http` 모듈**을 가져오고 있습니다. `http` 모듈은 웹 서버를 만드는 데 사용되는 기본 모듈로, 별도로 설치할 필요 없이 바로 사용할 수 있습니다.

2. **`const server = http.createServer((req, res) => { ... });`**
   - **`http.createServer`**는 웹 서버를 생성하는 함수입니다.
   - 이 함수는 **콜백 함수**를 인자로 받는데, 그 콜백 함수에는 두 가지 매개변수인 **`req`**(요청)과 **`res`**(응답)가 전달됩니다.
     - **`req`**: 클라이언트(사용자)가 보낸 요청을 담고 있는 객체입니다.
     - **`res`**: 서버가 클라이언트에게 응답할 때 사용하는 객체입니다.

3. **`res.writeHead(200, { "content-type": "text/html" });`**
   - **`writeHead`**는 HTTP 응답의 상태 코드와 헤더 정보를 설정하는 함수입니다.
     - `200`: 요청이 성공적으로 처리되었음을 의미하는 **상태 코드**입니다. 웹에서 요청이 정상적으로 처리되면 `200 OK` 상태가 반환됩니다.
     - `{ "content-type": "text/html" }`: **헤더**에서 응답 콘텐츠의 타입을 설정합니다. 여기서는 **HTML** 형식으로 데이터를 보낼 것이라고 명시한 것입니다.

4. **`res.write("<h1>Hello World</h1>");`**
   - **`write`**는 클라이언트로 데이터를 전송하는 함수입니다.
   - `"<h1>Hello World</h1>"`: 이 데이터를 클라이언트에게 보냅니다. 즉, 클라이언트는 **`<h1>Hello World</h1>`**라는 HTML 콘텐츠를 받게 됩니다.
   - 여기서 `h1`은 HTML에서 **헤딩 태그**로, 제목을 크게 표시하는 용도로 사용됩니다.

5. **`res.end();`**
   - **`end`**는 응답을 종료하는 메서드입니다. 즉, 클라이언트에게 전송할 데이터가 더 이상 없음을 알리고, 응답을 완료합니다.

6. **`server.listen(3000, () => { console.log("Listening on port 3000"); });`**
   - **`listen`**은 서버가 실제로 요청을 받기 시작하게 하는 함수입니다.
   - `3000`: 서버가 **3000번 포트**에서 요청을 기다리도록 합니다. 포트 번호는 서버가 응답을 기다리는 번호입니다. (예: `localhost:3000`)
   - 두 번째 인자로는 서버가 실행되었을 때 실행할 **콜백 함수**가 옵니다. 이 함수는 서버가 성공적으로 실행되었을 때, 콘솔에 "Listening on port 3000" 메시지를 출력합니다.

---

#### 5. **서버 실행 과정**

1. **서버 시작**:
   - 서버를 시작하려면 터미널에서 `node server.js` 명령어를 입력합니다. 이 명령어는 `server.js` 파일을 실행하여 서버를 시작합니다.
   
2. **서버 확인**:
   - 서버가 실행되면, 터미널에 `Listening on port 3000` 메시지가 출력됩니다.
   - 웹 브라우저에서 `http://localhost:3000`에 접속합니다.

3. **웹 페이지 출력**:
   - 브라우저에서 `http://localhost:3000`을 열면, 아래와 같은 화면을 볼 수 있습니다:

```html
<h1>Hello World</h1>
```

---

#### 6. **시각화**

##### 프로젝트 폴더 구조

```bash
my-node-project/
├── server.js                  # 서버 파일
├── package.json               # 프로젝트 메타데이터
└── node_modules/              # 설치된 npm 패키지들
```

##### 서버 실행 흐름

1. **서버 실행**:
   - `node server.js` 명령어로 서버를 시작합니다.
   - 서버가 실행되면 `3000`번 포트에서 요청을 기다립니다.

2. **요청 수신**:
   - 웹 브라우저에서 `http://localhost:3000`에 접속하면, 클라이언트는 요청을 서버에 보냅니다.

3. **응답 전송**:
   - 서버는 클라이언트로부터 요청을 받고, `Hello World`라는 메시지를 포함한 HTML 콘텐츠를 클라이언트에게 응답합니다.

---

#### 7. **최종 정리**

- **Node.js 웹 서버**:
  - `http` 모듈을 사용하여 **웹 서버**를 만들었습니다.
  - `createServer`와 `listen` 메서드를 사용하여 요청을 받고 응답하는 서버를 만들었습니다.
  - **클라이언트-서버** 간의 요청 및 응답 흐름을 이해할 수 있었습니다.

- **핵심 개념**:
  - **`http.createServer`**: 웹 서버를 만들고, 요청을 처리하는 메서드입니다.
  - **`res.writeHead`**: 응답 헤더를 설정합니다.
  - **`res.write`**: 클라이언트로 데이터를 전송합니다.
  - **`res.end`**: 응답을 종료합니다.
  - **`server.listen`**: 서버가 요청을 대기하는 포트를 설정합니다.

이로써 Node.js의 기본적인 서버를 만들었고, **HTTP 요청과 응답**의 흐름을 이해하는 데 큰 도움이 되었습니다. **클라이언트-서버 통신**을 이해하고, 실제 웹 서버를 구현할 수 있는 기초를 다졌습니다.