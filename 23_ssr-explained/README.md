# 23. 🎓SSR이란? 서버 렌더링 구조 쉽게 이해하기 (CSR과 같은 형식)

---

## 🥇 SSR(Server Side Rendering)이란?

> **SSR이란**, 웹사이트의 화면(HTML)을 **브라우저가 아닌 서버에서 미리 만들어서** 사용자에게 전달하는 방식입니다.

- 서버가 미리 **전체 페이지를 만들어서** 브라우저에 보내줍니다.
- 브라우저는 **받은 내용을 그대로 보여주기만 하면 됩니다.**
- 자바스크립트 없이도 화면이 잘 보입니다.

---

## 💬 현실 비유로 쉽게 이해하기

### 🛍️ 쇼핑몰 비유

#### ✅ 서버 렌더링 (SSR)

> 손님이 쇼핑몰에 들어오면, 직원이 필요한 상품을 골라 예쁘게 포장한 **완성된 쇼핑백**을 건네줍니다.

- 손님은 그 쇼핑백을 **그대로 받아 열어보면 됩니다.**
- 직원이 미리 다 만들어놨기 때문에 손님은 **기다릴 필요가 없습니다.**
- 단점: 상품을 바꿔야 할 때마다 **다시 쇼핑백을 포장**해야 합니다.

#### 🔄 클라이언트 렌더링 (CSR)

> 쇼핑백만 먼저 받고, 손님이 직접 상품을 고르는 방식이었습니다. (이전 강의 참고)

---

## 🔁 SSR 동작 방식 시각화

```
[1] 브라우저가 HTML 페이지를 요청
     ↓
[2] 서버가 데이터를 읽고 HTML을 만듦
     ↓
[3] 완성된 HTML 전체를 브라우저에 전달
     ↓
[4] 브라우저는 받은 HTML을 바로 보여줌
     ↓
[5] 사용자에게 바로 보이는 웹페이지 완성!
```

👉 모든 화면 제작은 **서버에서 완료되며**, 브라우저는 그냥 **받아 보여주기만** 합니다.

---

## ✨ 아주 쉬운 예제: SSR을 사용하는 Node.js 코드

```js
const http = require("http"); // 기본 http 서버 모듈
const fs = require("fs");     // 파일 시스템 (현재는 사용 안하지만 일반적으로 함께 사용됨)

// ① 간단한 HTTP 서버를 생성합니다
const server = http.createServer((req, res) => {
  // ② 서버 측에서 데이터를 준비합니다
  // 실제로는 DB에서 데이터를 가져올 수도 있습니다
  const data = [{ title: "Item 1" }, { title: "Item 2" }];

  // ③ 서버가 HTML 코드를 직접 만듭니다 (데이터를 포함한 상태로!)
  const html = `
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>SSR Example</title>
    </head>
    <body>
        <h1>Server-Side Rendered Page</h1>
        ${data.map((item) => `<p>${item.title}</p>`).join("")}
    </body>
    </html>
  `;

  // ④ 만든 HTML을 클라이언트에 전송합니다
  res.writeHead(200, { "Content-Type": "text/html" }); // 응답 헤더 설정
  res.end(html); // HTML 전체를 브라우저로 보냅니다
});

// ⑤ 서버를 3000번 포트에서 실행합니다
server.listen(3000, () => {
  console.log("Server is running on http://localhost:3000");
});
```

---

## 🔍 코드 흐름을 아주 쉽게 설명하면?

### 🧩 1단계: 사용자가 웹페이지를 요청합니다

```
브라우저: "http://localhost:3000 열어주세요!"
```

### ⚙️ 2단계: 서버가 데이터를 준비합니다

```js
const data = [{ title: "Item 1" }, { title: "Item 2" }];
```

- 실제 서비스라면 데이터베이스에서 게시글 목록이나 상품 목록을 가져옵니다.

### 🧱 3단계: 서버가 HTML을 직접 만듭니다

```js
const html = `
  <html>
    ...
    <p>Item 1</p>
    <p>Item 2</p>
  </html>
`;
```

- 자바스크립트를 사용해 데이터로 HTML을 조립합니다.
- 브라우저가 직접 만들 필요 없이 **서버가 이미 완성한 상태**입니다.

### 🚚 4단계: 서버가 완성된 HTML을 브라우저로 보냅니다

```js
res.end(html);
```

- 브라우저는 이 HTML을 그대로 받아서 화면에 표시합니다.
- 별도의 동적 렌더링 없이 바로 보이기 때문에 속도가 빠릅니다.

---

## 🧠 쉽게 기억하기 위한 핵심 문장

| 구분 | 쉽게 말하면 |
|------|--------------|
| 서버 | 쇼핑백을 미리 포장하는 직원 |
| HTML | 완성된 쇼핑백 |
| 브라우저 | 쇼핑백을 받아 여는 손님 |
| SSR 방식 | 화면을 서버가 만들어서 직접 전달한다 |

---

## 📊 SSR과 CSR 차이 정리

| 항목 | SSR (서버 렌더링) | CSR (클라이언트 렌더링) |
|------|--------------------|--------------------------|
| HTML 생성 위치 | 서버 | 브라우저 |
| 초기 로딩 속도 | 빠름 | 느릴 수 있음 |
| 자바스크립트 없어도 동작 | 가능 | 불가능 |
| 새로고침 없이 화면 변경 | 어려움 | 쉬움 |
| 검색엔진 최적화(SEO) | 좋음 | 어려울 수 있음 |
| 대표 예시 | 뉴스, 블로그 | Gmail, 페이스북 |

---

## 🛠 실생활 예시 정리

| 사이트 | SSR인가요? |
|--------|------------|
| 네이버 뉴스 | ✅ SSR |
| 블로그 글 페이지 | ✅ SSR |
| 유튜브, Gmail, 카카오톡 웹 | ❌ CSR |

---

## 💭 헷갈릴 땐 이렇게 정리하세요!

```
✅ SSR은 "받자마자 다 보이는" 웹페이지입니다.
❌ CSR은 "받고 나서 자바스크립트가 채워야 보이는" 웹페이지입니다.
```
