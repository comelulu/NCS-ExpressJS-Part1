# 22. 🥇 CSR(Client Side Rendering) 이란?

> **CSR이란**, 웹사이트의 화면(HTML)을 **서버가 아니라 브라우저(클라이언트)**가 직접 만들어서 보여주는 방식입니다.

- 처음에는 거의 **비어 있는 HTML 틀**만 받고,  
- 자바스크립트가 실행되면서  
- 서버에 "데이터 주세요!"라고 요청하고,  
- 받은 데이터를 브라우저가 **직접 HTML로 만들어서 사용자에게 보여줍니다.**

---

## 💬 현실 비유로 쉽게 이해하기

### 🛍️ 쇼핑몰 비유

#### 🧾 서버 렌더링 (SSR)

> 쇼핑몰 직원이 손님이 원하는 상품을 직접 골라 예쁘게 포장해서 쇼핑백에 담아 주는 방식입니다.

- 손님은 **포장된 쇼핑백(완성된 HTML)을 그대로 받아서 열어보면 됩니다.**
- 단점: 직원이 매번 포장해야 하니 시간이 걸릴 수 있습니다.

#### 🔄 클라이언트 렌더링 (CSR)

> 쇼핑몰 입구에서 `빈 쇼핑백(HTML 뼈대)`을 받고,  
> 직원이 `상품 창고 주소(API)`를 알려줍니다.  
> 손님(브라우저)이 직접 창고에 가서 상품을 고르고, 쇼핑백에 채워 넣습니다.

- 장점: **자기가 원하는 것만 빠르게 담을 수 있습니다.**
- 단점: **처음엔 쇼핑백이 비어 있어** 뭔가 없는 것처럼 느껴질 수 있습니다.

---

## 🔁 CSR 동작 방식 시각화

```js
[1] 브라우저가 HTML 파일을 요청
     ↓
[2] 서버는 HTML 틀(빈 쇼핑백)을 응답
     ↓
[3] HTML 안의 자바스크립트 실행됨
     ↓
[4] 자바스크립트가 서버(API)에 데이터 요청
     ↓
[5] 서버가 JSON 데이터 응답
     ↓
[6] 브라우저가 받은 데이터를 HTML로 만들어 쇼핑백에 담음
     ↓
[7] 사용자에게 완성된 화면이 보임 (렌더링 완료!)
```

👉 즉, **쇼핑백은 브라우저에서 직접 채워지는 구조**이며, **페이지를 재로딩하지 않고도 바뀔 수 있는 특징**이 있습니다.

---

## ✨ 아주 쉬운 예제: CSR을 사용한 HTML 코드

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CSR 예제</title>
</head>
<body>
  <!-- 여기 안에 데이터를 넣을 겁니다 (쇼핑백 역할) -->
  <div id="app">잠시만 기다려주세요...</div>

  <script>
    // 1. 실제 서버 대신, 가짜 데이터 배열을 만듭니다
    const fakeData = [
      { title: "사과" },
      { title: "바나나" },
      { title: "오렌지" },
    ];

    // 2. 데이터를 HTML 요소로 변환해 보여주는 함수입니다
    function renderData(data) {
      const app = document.getElementById("app");
      app.innerHTML = ""; // 기존 "잠시만 기다려주세요..." 문구를 지웁니다

      data.forEach((item) => {
        const p = document.createElement("p");
        p.textContent = item.title;
        app.appendChild(p); // <p>사과</p> 같은 태그를 추가합니다
      });
    }

    // 3. 마치 데이터를 기다리는 것처럼 1초 뒤에 화면을 채웁니다
    setTimeout(() => {
      renderData(fakeData);
    }, 1000);
  </script>
</body>
</html>
```

---

## 🔍 코드 흐름을 아주 쉽게 설명하면?

CSR의 핵심은 `"처음 화면은 비어 있고, 자바스크립트가 데이터를 채운다"`입니다.  
즉, 쇼핑백은 받았지만 상품은 직접 담아야 하죠.

### 🧩 1단계: HTML만 먼저 도착합니다

```html
<div id="app">잠시만 기다려주세요...</div>
```

- 브라우저는 처음에 이 구조만 화면에 띄웁니다.
- 이 시점의 쇼핑백은 **비어 있지만 모양은 있음** 상태입니다.
- 고객은 “아직 상품은 안 담겼네?” 하고 기다리는 중입니다.

---

### ⚙️ 2단계: 자바스크립트가 실행됩니다

```js
setTimeout(() => {
  renderData(fakeData);
}, 1000);
```

- 1초 동안 기다리는 동안 자바스크립트는 “창고로 상품 가지러 가는 중…”입니다.
- 실제 앱에서는 이 부분이 보통 `fetch()`를 사용하여 API로 데이터를 가져옵니다.

---

### 📦 3단계: 상품을 가져와 쇼핑백에 채웁니다

```js
function renderData(data) {
  // 받은 데이터를 기반으로 HTML 요소를 만들어
  // app(div) 내부에 넣습니다
}
```

- 브라우저가 받은 데이터를 `p` 태그로 만들고, 빈 div 안에 넣습니다.
- 이제 쇼핑백 안에 상품이 하나둘 들어와 화면이 완성됩니다.

---

## 🧠 쉽게 기억하기 위한 핵심 문장

| 구분 | 쉽게 말하면 |
|------|--------------|
| HTML | 쇼핑백의 틀 |
| 자바스크립트 | 상품을 담는 손 |
| API (창고) | 데이터가 저장된 곳 |
| CSR 방식 | 빈 쇼핑백을 받고, 자기가 직접 담는다 |

---

## 📊 CSR과 SSR 차이 정리

| 항목 | SSR (서버 렌더링) | CSR (클라이언트 렌더링) |
|------|--------------------|--------------------------|
| 화면 생성 위치 | 서버에서 제작 | 브라우저에서 제작 |
| 초기 로딩 속도 | 빠름 | 약간 느릴 수 있음 |
| 새로고침 없이 화면 변경 | 어려움 | 매우 쉬움 |
| 검색엔진 최적화(SEO) | 유리 | 불리할 수 있음 |
| 예시 | 뉴스, 블로그 | Gmail, 페이스북 |

---

## 🛠 실생활 예시 정리

| 사이트 | CSR인가요? |
|--------|------------|
| Gmail (메일함 자동 갱신됨) | ✅ CSR |
| 페이스북 (댓글이 실시간으로 바뀜) | ✅ CSR |
| 네이버 뉴스 기사 | ❌ SSR |
| 네이버 메인 페이지 (기본 검색 결과) | ❌ SSR |

---

## 💭 헷갈릴 땐 이렇게 정리하세요!

```
✅ CSR은 내가 뭔가 눌렀을 때 화면이 바뀌고 새로고침이 안 된다면 거의 CSR입니다.
❌ 새로고침될 때마다 전체 페이지가 다시 불러와진다면 SSR입니다.
```
