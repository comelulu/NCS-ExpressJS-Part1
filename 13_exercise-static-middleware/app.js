// 1. Express λ¨λ“ λ¶λ¬μ¤κΈ°
//    Node.jsμ—μ„ μ„λ²„λ¥Ό λ§λ“¤κΈ° μ„ν• μ›Ή ν”„λ μ„μ›ν¬
const express = require("express");

// 2. μ•± μΈμ¤ν„΄μ¤ μƒμ„±
//    λΌμ°ν„°, λ―Έλ“¤μ›¨μ–΄, μ„λ²„ μ‹¤ν–‰ λ“±μ„ μ΄ app κ°μ²΄λ΅ μ²λ¦¬ν•©λ‹λ‹¤.
const app = express();

/*
==========================================================
π“¦ μ‹¤μ  μ‹λ‚λ¦¬μ¤: "μƒν’ μ²λ¦¬ κ³µμ¥"
- μ΄ μ½”λ“λ” Express λ―Έλ“¤μ›¨μ–΄λ¥Ό ν™μ©ν•΄ λ§μΉ λ¬Όλ¥μ„Όν„°μ²λΌ μ”μ²­ νλ¦„μ„ κµ¬μ„±ν–μµλ‹λ‹¤.
- κ°κ°μ λ―Έλ“¤μ›¨μ–΄λ” μƒν’μ μ²λ¦¬ λ‹¨κ³„λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.
- μ‚¬μ©μκ°€ "/delivery" κ²½λ΅λ΅ μ”μ²­μ„ λ³΄λ‚΄λ©΄, μƒν’μ΄ κ³µμ¥μ„ κ±°μ³ κ³ κ°μ—κ² λ°°μ†΅λλ” κ³Όμ •μ„ ν‰λ‚΄λƒ…λ‹λ‹¤.
==========================================================
*/

// β… [1λ‹¨κ³„] μƒν’μ΄ κ³µμ¥μ— λ„μ°©
app.use((req, res, next) => {
  console.log("[1λ‹¨κ³„]: μƒν’μ΄ λ„μ°©ν–μµλ‹λ‹¤.");
  next(); // λ‹¤μ λ‹¨κ³„λ΅ λ„μ–΄κ°‘λ‹λ‹¤
});

// β… [2λ‹¨κ³„] μ…κ³  μ²λ¦¬
app.use((req, res, next) => {
  console.log("[2λ‹¨κ³„]: μƒν’μ΄ μ…κ³ λμ—μµλ‹λ‹¤.");
  next();
});

// β… [3λ‹¨κ³„] μ¬κ³  μ‹μ¤ν… λ“±λ΅
app.use((req, res, next) => {
  console.log("[3λ‹¨κ³„]: μ¬κ³  κ΄€λ¦¬λ¥Ό μ‹μ‘ν–μµλ‹λ‹¤.");
  next();
});

// β… [4λ‹¨κ³„] μ£Όλ¬Έ ν™•μΈ
app.use((req, res, next) => {
  console.log("[4λ‹¨κ³„]: μ£Όλ¬Έ μ²λ¦¬λμ—μµλ‹λ‹¤.");
  next();
});

// β… [5λ‹¨κ³„] λ°°μ†΅ μ¤€λΉ„ μ™„λ£ β†’ μ΄μ  μ‹¤μ  λ°°μ†΅ λΌμ°ν„°λ΅ μ΄λ™ν•©λ‹λ‹¤
app.use((req, res, next) => {
  console.log("[5λ‹¨κ³„]: λ¬Όλ¥ λ°°μ†΅μ΄ μ‹μ‘λμ—μµλ‹λ‹¤. λΌμ°ν„°λ΅ μ΄λ™ν•©λ‹λ‹¤.");
  next();
});

// β… [μµμΆ… λ‹¨κ³„] λ°°μ†΅ μ‹μ‘ (λΌμ°ν„° ν•Έλ“¤λ¬)
//     ν΄λΌμ΄μ–ΈνΈκ°€ "/delivery" κ²½λ΅λ΅ μ”μ²­ν•  λ• μ‹¤ν–‰λ©λ‹λ‹¤.
app.get("/delivery", (req, res) => {
  console.log("π λ¬Όλ¥ λ°°μ†΅ μ‹μ‘"); // μ½μ†”μ— μµμΆ… λ©”μ‹μ§€ μ¶λ ¥
  res.send("<h1>λ¬Όλ¥ λ°°μ†΅ μ‹μ‘</h1>"); // ν΄λΌμ΄μ–ΈνΈμ—κ² HTML μ‘λ‹µ μ „μ†΅
});

// β… 3000λ² ν¬νΈμ—μ„ μ„λ²„ μ‹¤ν–‰
app.listen(3000, () => {
  console.log("β… μ„λ²„κ°€ 3000λ² ν¬νΈμ—μ„ μ‹¤ν–‰ μ¤‘μ…λ‹λ‹¤.");
});
